# Patient UI Api

Unless specified otherwise, all APIs require a patient token (the system admin APIs will be moved into their own document later)

| **Mapping**  | URL | **Purpose** | **RequestDTO** | **ResponseDTO**  | If used                           |
| ---         | ---   | ---    | ---        | ---       | ---  |
| PUT                                | /api/i/referral/addreferral/{mobile}                       | add referral a user to the currently logged in user                                                  | (string) mobile                                                                                                                                                                                                                                                                                               | success or failed (string)                                                                                                                                                                                                                                                                                                                            | All non-admin users can use this  |
| GET                                | /api/i/referral/getreferraluser                            | get referral users ID as a String                                                                    |                                                                                                                                                                                                                                                                                                               | user id (string)                                                                                                                                                                                                                                                                                                                                      | All non-admin users can use this  |
| PUT                                | /api/i/referral/addreferreduser                            | adds the currently logged in user to the referred users list of their referral user                  |                                                                                                                                                                                                                                                                                                               | success or failed (string)                                                                                                                                                                                                                                                                                                                            | All non-admin users can use this  |
| GET                                | /api/i/referral/getreferredusers/{id}                      | gets the ids of all the referred users in the given users list                                       | user id                                                                                                                                                                                                                                                                                                       | list of user ids (list of longs)                                                                                                                                                                                                                                                                                                                      | All non-admin users can use this  |
| GET (role SYSTEMADMIN)             | /api/i/patients                                            | returns a list of all PatientDTO                                                                     |                                                                                                                                                                                                                                                                                                               | list of PatientDTOs (uesr id, email, mobile, patient id)                                                                                                                                                                                                                                                                                              |                                   |
| GET (role SYSTEMADMIN)             | /api/i/patients/viewallpatients                            | get a list of PatientProfileResponseDTO                                                              |                                                                                                                                                                                                                                                                                                               | list of PatientProfileResponseDTOs (user id, patient id, title, national id number, first name, sur name, date of birth, gender, marital status, weight, blood type, allergies, disabilities, language, country, state, community, address, post code, purpose of visit)                                                                              |                                   |
| GET (role PATIENT or SYSTEMADMIN)  | /api/i/patients/{id}                                       | get a specific patientDTO                                                                            | patient id                                                                                                                                                                                                                                                                                                    | user id, email, mobile, patient id                                                                                                                                                                                                                                                                                                                    |                                   |
| GET (role PATIENT or SYSTEMADMIN   | /api/i/patients/patientinfo/{id}                           | gets the PatientProfileResponseDTO                                                                   | patient id                                                                                                                                                                                                                                                                                                    | user id, patient id, title, national id number, first name, sur name, date of birth, gender, marital status, weight, blood type, allergies, disabilities, language, country, state, community, address, post code, purpose of visit                                                                                                                   |                                   |
| PUT                                | /api/i/patients                                            | to complete patient profile, returns a PatientProfileResponseDTO                                     |                                                                                                                                                                                                                                                                                                               | user id, patient id, title, national id number, first name, sur name, date of birth, gender, marital status, weight, blood type, allergies, disabilities, language, country, state, community, address, post code, purpose of visit                                                                                                                   |                                   |
| POST                               | /api/i/consultations/book                                  | books a consultation for a patient                                                                   | (string) patient name, (long) patient id, (string) illness, (list of strings) symptoms, (string) detailed description, (string) transaction reference, (string) language, (integer) amount paid                                                                                                               | consultation id, patient name, patiend id, doctor name, illness, date, time booked, time accepted, time started, status, symptoms, detailed description, transaction reference                                                                                                                                                                        |                                   |
| POST                               | /api/i/children/{patientId}/createchild                    | Create Child with patientsID and supply child info as JSON in body                                   | (string) first name, (string) sur name, (string) date of birth, (string) gender, (string) weight,  (string) blood type, (string) allergies, (string) disabilities                                                                                                                                           | patientID x has y child/children or Child cannot be created. Patient is not present (string)                                                                                                                                                                                                                                                          |                                   |
| GET (role SYSTEMADMIN)             | /api/i/children/getallchildren                             | Get all child info from repository as JSON                                                           |                                                                                                                                                                                                                                                                                                               | list of children (child id, first name, sur name, date of birth, gender, patient id, weight, blood type, allergies, disabilities)                                                                                                                                                                                                                     |                                   |
| GET (role PATIENT or SYSTEMADMIN)  | /api/i/children/{Patientid}                                | Get all child info for a specific patient from repository as JSON                                    | patientId                                                                                                                                                                                                                                                                                                     | list of children(child id, first name, sur name, date of birth, gender, patient id, weight, blood type, allergies, disabilites)                                                                                                                                                                                                                       |                                   |
| PUT (role PATIENT or SYSTEMADMIN)  | /api/i/children/{childid}                                  | Update child profile                                                                                 | (path variable) childId, (string) first name, (string) sur name, (string) date of birth, (string) gender, (string) weight,  (string) blood type, (string) allergies, (string) disabilities                                                                                                                  |                                                                                                                                                                                                                                                                                                                                                       |                                   |
| POST                               | /api/i/needyperson/{patientId}/createneedyperson           | create needy person with patientId  and supply needy person info as JSON body                        | (string) title, (string) national Id number, (string) first name, (string) surname, (string) date of birth, (string) gender, (string) caregiver, (string) email, (string) mobile, (string) language, (string) address, (string) postcode,  (string) state, (string) country                                 |                                                                                                                                                                                                                                                                                                                                                       |                                   |
| GET (role SYSTEMADMIN)             | /api/i/needyperson/getallneedypersons                      | get all needy persons info from repository as JSON                                                   |                                                                                                                                                                                                                                                                                                               | list of needy persons (needy person id, patient id, title, national id number, first name, sur name, date of birth, gender, caregiver, email, mobile, language, address, post code, state, country)                                                                                                                                                   |                                   |
| GET (role PATIENT or SYSTEMADMIN)  | /api/i/needyperson/{Patientid}                             | get all needy persons info from a specific patient from repository as JSON                           |                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                       |                                   |
| PUT (role PATIENT or SYSTEMADMIN)  | /api/i/needyperson/{needypersonid}                         | update needy person profile                                                                          | (path variable) needypersonid, (string) title, (string) national Id number, (string) first name, (string) surname, (string) date of birth, (string) gender, (string) caregiver, (string) email, (string) mobile, (string) language, (string) address, (string) postcode,  (string) state, (string) country  |                                                                                                                                                                                                                                                                                                                                                       |                                   |
| GET                                | /api/i/prescriptions/{id}/prescriptionsbydate              | get all prescriptions with a specific patient id sorted by the date                                  | (path variable) id                                                                                                                                                                                                                                                                                            | list of prescriptionDTOs (id, date, patient mobile number, illness, patient id, patient name, patient date of birth, patient address, medication name, medication form, medication strength, medication dose, medication route, medication frequency, medication refills, medication quantity, doctor name, doctor mobile number, pharmacist remark)  |                                   |
| GET (role PATIENT or SYSTEMADMIN)  | /api/i/consultations/viewalldoneconsultations/{patientId}  | Gets all done consultations (aka the consultation history) of a specific patient sorted by the date  | (path variable) long patient id                                                                                                                                                                                                                                                                               | list of DoneConsultationWithJounralDTOs (id, patient, patient id, doctor, doctor id, illness, language, patient description, headIn, date, summary, consultation duration in minutes, patient journal (id, patient name, illness summary, date, doctor name, doctors remark))                                                                         |                                   |
| GET (role PATIENT or SYSTEMADMIN)  | /api/i/laboratory/getalllabrequest/{patientid}             | Get all lab requests for a specific patient sorted by the date                                       | (path variable) patient id                                                                                                                                                                                                                                                                                    | list of LabRequestDTOs (id, patient name, patient id, test requested, date, doctors name, test reason, qr code (as a byte array))                                                                                                                                                                                                                     |                                   |

